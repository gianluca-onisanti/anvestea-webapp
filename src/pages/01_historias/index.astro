---
/// INDEX DE DESENVOLVEDOR
import Layout from "../../layouts/Layout.astro";
import SideMenu from "../../components/SideMenu.astro";

const pageTitle = "Histórias"

let current = 0

---

<script>
    // Extrair o parâmetro 'markdown' da URL
    const urlParams = new URLSearchParams(window.location.search)
    const markdownIndex = urlParams.get("markdown") || 0

    // Aqui definimos o markdown dessa Sessão
    const markdownFiles = [
        "./01_o-que-e-datasol", 
        "./02_tecnologias-escolhidas",
        "./03_autenticacao"
    ]

    // Verificar se o índice é válido
    if (
        Number(markdownIndex) >= 0 &&
        Number(markdownIndex) < markdownFiles.length
    ) {
        const markdownFile = markdownFiles[Number(markdownIndex)];

        // Carregar o conteúdo Markdown usando fetch
        fetch(markdownFile)
            .then((response) => response.text())
            .then((markdownContent) => {
                // Renderizar o conteúdo Markdown no elemento 'main'
                const mainElement = document.querySelector("main")
                mainElement && (mainElement.innerHTML = markdownContent)
            })
            .catch((error) => {
                console.error("Erro ao carregar o arquivo Markdown:", error)
                // Lógica para lidar com o erro (exibir uma mensagem de erro, etc.)
            });
    } else {
        console.error("Índice de Markdown inválido:", markdownIndex)
        // Lógica para lidar com o índice inválido
    }
</script>

<SideMenu
    role="dev"
    isOpen={true}
    links={[
        {
            href: "../",
            link: null,
            label: "Início / Histórias",
        },
        {
            href: "./?markdown=0",
            icon: "info",
            label: "Básicos: O que é Datasol?",
        },
        {
            href: "./?markdown=1",
            icon: "emoji_objects",
            label: "Básicos: Tecnologias Escolhidas",
        },
        {
            href: "./?markdown=2",
            icon: "key",
            label: "Básicos: Controle de Acesso",
        }
    ]}
    
/>

<Layout id="titulo" title={pageTitle}>
    <main style="max-width: 750px;">
    </main>
</Layout>
